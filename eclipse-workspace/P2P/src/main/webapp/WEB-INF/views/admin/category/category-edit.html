<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security" lang="en">

<head>
<th:block th:include="admin/layout/head :: head"></th:block>

</head>

<body>
	<div class="wrapper ">

		<div th:replace="admin/layout/leftNavAdmin :: leftNavAdmin"></div>

		<div class="main-panel">
			<!-- Navbar -->
			<div th:replace="admin/layout/HeadNavAdmin :: headNavAdmin"></div>
			<!-- End Navbar -->
			<!-- content -->

			<div
				th:replace="components/admin/category/category-edit :: category-edit"></div>
			<!-- End content -->
			<div th:replace="admin/layout/footerAdmin :: footerAdmin"></div>
		</div>
	</div>

	<th:block th:replace="admin/layout/footer :: footer"></th:block>
	<script th:inline="javascript">
	const category = [[${ category }]];

	</script>
	<script>
	 function editCategory() {
    	
        
		 category.name = $("#CategoryName").val();
        
        
        var token = $("meta[name='_csrf']").attr("content");
        var header = $("meta[name='_csrf_header']").attr("content");
        $.ajax({
            url: `/admin/category/edit/`,
            type: 'PUT',
            dataType: "json",
            contentType: "application/json",
            data: JSON.stringify(category),

            beforeSend: function (xhr) {
                xhr.setRequestHeader(header, token);
            },
            success: function (data, status, xhr) {
					console.log(data);
					window.location.href = "/admin/category/list";
				},
            error: function (request, status, error) {
            	try {
					  Swal.fire({
						  icon: 'error',
						  title: 'Oops...',
						  text: request.responseJSON.msg,
						})
                } catch (error) { }
            }
        });

    }
   </script>

</body>
</html>